## IaC

Définition d'un flow précis pour la création de VMs:

Disques: image cloud qcow2 pour l'os disk (jetable, lvm redondant, car espace géré niveau hyperviseur), data disk LVM.
qcow2 generic -> Cloud init préinstallé et drivers avec
Python pour script CI -> lib `proxmoxer` pour manipuler l'API, de ce fait, pas de `qm` et pas d'accès SSH, uniquement via token, facilité via Python grace à la lib, pas besoin de logique complexe avec Bash, go non adapté.
Terraform Module Registry -> Module de create VM utilisable à travers plusieurs CI.
`proxmox-clone` -> Utilisation d'une template et non d'une ISO.

Flux:
3 repo avec CI/CD

Stage 1 (script Python) : Download qcow2 + create vm + import qcow2 + templatise vm via API

Stage 2 (Packer)      : proxmox-clone de cette template → customise → nouvelle template prod

Stage 3 (Terraform)   : Déploie VM de test depuis template prod

Stage 4 (Terraform Tests): Validation → si OK, destroy VM de test, si NOK log + destroy de la template